# 项目概述

这个项目用于生成训练过程中的样本。

## 参考

此项目参考了以下的开源项目：

- <https://github.com/mdbloice/Augmentor>
- <https://github.com/wang-tf/Chinese_OCR_synthetic_data>
- <https://github.com/JarveeLee/SynthText_Chinese_version>
- <https://github.com/Belval/TextRecognitionDataGenerator.git>
- <https://github.com/Sanster/text_renderer>

# 样本生成

## 思路
外部框架实现：
- 多进程处理
- 各资源的预加载

1、先加载字体、背景、字符集、字库
2、生成一个串文本
3、画文本到背景上，并确定bbox
4、做增强
    - 旋转
    - 剪切
    - 各种滤镜（模糊、噪音、...）
5、最终保存图片和调整后的bbox

## 生成识别样本（仅有字符标注）

这种标注，对每个文件，仅提供其对应的字符串，不靠谱中文中的全角半角，需要程序自己进行转换。

标注文件只有一个，如train.txt。文件分为2列：文件路径、对应文字。

样例：

```text
data/train/abc.jpg 你好，世界
data/train/bcd.jpg 毁灭吧，世界！累了~
......
```

## 生成带位置信息的识别样本

这种样本，是标注了每个字符的轮廓的，每个字的轮廓采用4点标注。
第一行是样本对应的字符串，第2行至最后一行，是每个汉字的4点标注，和对应的汉字。

**样例：**

所有样例存放在一个文件夹里，每张图片有唯一的名字，而标注的文件名字一样，只是后缀为.txt。

图像文件名：abc.jpg

标注文件名：abc.txt

标注文件样例：
```text
你好，世界                      <---- 第1行，标注结果
11,12,21,22,31,32,41,42 你     <---- 第2行-最后一行，标注每个文字的框
11,12,21,22,31,32,41,42 好
11,12,21,22,31,32,41,42 ，
11,12,21,22,31,32,41,42 世
11,12,21,22,31,32,41,42 界
```

# 设计

